; PHP OpCache Optimization Configuration
; Agregar a php.ini o crear en /etc/php/8.x/mods-available/ en producción
; En Plesk: Panel > PHP Settings > Additional directives

[opcache]
; Habilitar OpCache
opcache.enable=1
opcache.enable_cli=1

; Memoria para OpCache (128MB es suficiente para la mayoría)
opcache.memory_consumption=256
opcache.interned_strings_buffer=16

; Máximo de archivos en caché
opcache.max_accelerated_files=10000

; Validación de archivos (en producción usar 60 segundos o más)
; En desarrollo: 0 para recargar en cada request
opcache.revalidate_freq=60

; Fast shutdown
opcache.fast_shutdown=1

; Optimizaciones adicionales
opcache.validate_timestamps=1
opcache.save_comments=1
opcache.enable_file_override=1

; JIT Compiler (PHP 8.0+)
; Modo tracing = mejor para apps web dinámicas
opcache.jit=tracing
opcache.jit_buffer_size=128M

; Preloading (opcional, para Laravel)
; Descomentar y ajustar ruta
;opcache.preload=/home/janmurillo83/PhpstormProjects/TusImpuestos3/preload.php
;opcache.preload_user=www-data

[PHP]
; Otras optimizaciones de PHP

; Límites de memoria
memory_limit=512M

; Límites de tiempo
max_execution_time=300
max_input_time=300

; File uploads
upload_max_filesize=50M
post_max_size=50M

; Realpath cache (importante para Laravel)
realpath_cache_size=4096K
realpath_cache_ttl=600
